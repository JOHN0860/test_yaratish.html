<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Test yaratish</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- MathLive -->
<link rel="stylesheet" href="https://unpkg.com/mathlive/dist/mathlive.core.css">
<link rel="stylesheet" href="https://unpkg.com/mathlive/dist/mathlive.css">
<script src="https://unpkg.com/mathlive/dist/mathlive.min.js"></script>

<style>
body{
  font-family: Arial;
  background:#f2f4f7;
  padding:15px;
}
.card{
  background:#fff;
  padding:12px;
  margin-bottom:12px;
  border-radius:8px;
}
.q{
  font-weight:bold;
  margin-bottom:6px;
}
label{margin-right:15px;}
.mathbox{
  margin-top:8px;
}
math-field{
  width:100%;
  min-height:45px;
  border:1px solid #ccc;
  border-radius:6px;
  padding:5px;
}
button{
  width:100%;
  padding:15px;
  font-size:18px;
  background:#4CAF50;
  color:white;
  border:none;
  border-radius:10px;
  margin-top:20px;
}
#code{
  text-align:center;
  font-size:28px;
  margin-top:15px;
  letter-spacing:3px;
}
</style>
</head>

<body>

<h2 style="text-align:center;">âœ… Test yaratish</h2>
<div id="app"></div>

<button id="createBtn" style="display:none" onclick="createTest()">âœ… Test yaratish</button>
<div id="code"></div>

<script>
const app = document.getElementById("app");
let data = {};

// 1â€“32 (A B C D)
for(let i=1;i<=32;i++){
  app.innerHTML+=`
  <div class="card">
    <div class="q">${i}-savol</div>
    ${["A","B","C","D"].map(v=>`
      <label><input type="radio" name="q${i}" onclick="setAns(${i},'${v}')"> ${v}</label>
    `).join("")}
  </div>`;
}

// 33â€“35 (A B C D E F)
for(let i=33;i<=35;i++){
  app.innerHTML+=`
  <div class="card">
    <div class="q">${i}-savol</div>
    ${["A","B","C","D","E","F"].map(v=>`
      <label><input type="radio" name="q${i}" onclick="setAns(${i},'${v}')"> ${v}</label>
    `).join("")}
  </div>`;
}

// 36â€“45 (A B + math input)
for(let i=36;i<=45;i++){
  app.innerHTML+=`
  <div class="card">
    <div class="q">${i}-savol</div>

    <label>
      <input type="radio" name="q${i}" onclick="setAB(${i},'A')"> A
    </label>
    <div class="mathbox">
      <math-field id="A${i}"></math-field>
    </div>

    <label>
      <input type="radio" name="q${i}" onclick="setAB(${i},'B')"> B
    </label>
    <div class="mathbox">
      <math-field id="B${i}"></math-field>
    </div>
  </div>`;
}

function setAns(q,v){
  data[q]={type:"select",value:v};
  showBtn();
}

function setAB(q,v){
  const val = document.getElementById(v+q).getValue();
  data[q]={type:"math",variant:v,value:val};
  showBtn();
}

function showBtn(){
  if(Object.keys(data).length>=1){
    document.getElementById("createBtn").style.display="block";
  }
}

function genCode(){
  const c="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  let r="";
  for(let i=0;i<6;i++) r+=c[Math.floor(Math.random()*c.length)];
  return r;
}

function createTest(){
  const code=genCode();
  console.log({code,data});
  document.getElementById("code").innerHTML="ðŸ“Œ Test kodi:<br>"+code;
}
</script>

</body>
</html>
